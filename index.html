<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrapper">
    <div class="tips">
      <p>Ấn vô đó đi</p>
    </br>
      <img src="./img/arrow-right.png" alt="">
    </div>
    <div class="box">
      <div class="circle">
        <div class="circle__text"><img src="./img/gift.png" alt=""></div>
      </div>
    </div>
      <div class="container">
        <div id="primary" class="spiner">

          <div class="spin-wrap">

              <!-- slide 1 -->
              <div class="content">
                <div class="box">
                  <div class="circle">
                    <div class="circle__text"><img src="./img/oneyear.png" alt=""></div>
                  </div>
                </div>
                <div class="content__text">
                  <p>Chào Thảo xil đẹp của anh !!!! <br>Đây là trang web anh làm ra để dành tặng cho em nhân ngày kỉ niệm 1 năm yêu nhau của chúng ta  </p>
                </div>
                <img class="content__bg" src="./img/gift.png" alt="">
              </div>

              <!-- slide 2 -->
              <div class="content">
                <div class="box">
                  <div class="circle">
                    <div class="circle__text"><p>Happy<br>One year</p></div>
                  </div>
                </div>
                <div class="content__text">
                  <p>Cảm ơn em đã đồng hành cùng anh trong hành trình 1 năm qua. Cảm ơn em đã luôn bên cạnh anh cho anh biết được những cung bật của tình yêu. Những lúc hạnh phúc  nhất của cuộc đời anh đều là những lúc có em bên cạnh</p>
                </div>
                <img class="content__bg" src="./img/gift.png" alt="">
              </div>
              <!-- slide 3 -->
              <div class="content">
                <div class="box">
                  <div class="circle">
                    <div class="circle__text"><p>Happy <br>One year</p></div>
                  </div>
                </div>
                <div class="content__text">
                  <p>Hành trình 1 năm không ngắn cũng không quá dài nhưng em giúp anh càng trưởng thành hơn, e giúp anh cảm thấy mình có trách nhiệm với bản thân mình hơn, có trách nhiệm với em </p>
                </div>
                <img class="content__bg" src="./img/gift.png" alt="">
              </div>
              <!-- slide 4 -->
              <div class="content">
                <div class="box">
                  <div class="circle">
                    <div class="circle__text"><p>Happy <br>One year</p></div>
                  </div>
                </div>
                <div class="content__text">
                  <p>Anh xin lỗi vì những lần anh không thể kiềm chế được cảm xúc của mình mà làm em buồn. Xin lỗi vì không thể bên cạnh em những lúc e cần anh</p>
                </div>
                <img class="content__bg" src="./img/gift.png" alt="">
              </div>
              <!-- slide 5 -->
              <div class="content">
                <div class="box">
                  <div class="circle">
                    <div class="circle__text"><p>Happy <br>One year</p></div>
                  </div>
                </div>
                <div class="content__text">
                  <p>Kết thúc hành trình 1 năm anh hứa: </p>
                  <p>Trưởng thành hơn</p>
                  <p>Kiềm chế được cảm xúc của mình</p>
                  <p>Cố gắng làm kiếm tiền để nuôi em </p>
                  <p>Mãi yêu em 1 năm 2 năm 5 năm 10 năm và mãi về sau nữa </p>
                </div>
                <img class="content__bg" src="./img/gift.png" alt="">
              </div>
              <!-- slide 6 -->
              <div class="content">
                <div class="box">
                  <div class="circle">
                    <div class="circle__text"><p>Happy <br>One year</p></div>
                  </div>
                </div>
                <div class="content__text">
                  <p>Anh sẽ tặng em một phần quà chỉ được chọn 1 trong 3 thôi nha chị yêu</p>
                </div>
                <img class="content__bg" src="./img/gift.png" alt="">
              </div>
              <!-- slide 7 -->
              <div class="content">
                <div class="box">
                  <div class="circle">
                    <div class="circle__text"><img src="./img/oneyear.png" alt=""></div>
                  </div>
                </div>
                <div class="content__text">
                  <p>Chọn 1 trong 3 hộp thôi nha <3</p>
                  <div class="content__gift">
                    <div class="content__gift-item">
                      <img src="./img/giftbox.png" alt="">
                    </div>
                    <div class="content__gift-item">
                      <img src="./img/giftbox.png" alt="">
                    </div>
                    <div class="content__gift-item">
                      <img src="./img/giftbox.png" alt="">
                    </div>
                  </div>
                </div>
                <img class="content__bg" src="./img/gift.png" alt="">
              </div>
              <!-- .... 
                thêm slide copy từ <div class="content"> đến thẻ đóng, 
                qua css tăng slide = số lượng muốn thêm ( --slider: [số lượng muốn thêm]  )
              -->
              <!-- .... -->
          </div>
          <div class="btn">
            <img src="./img/nextbtn.png" alt="">
          </div>
          
            
        </div>
        <div class="img-cat">
          <img src="./img/cat.jpeg" alt="">
        </div>
      </div>
      <div class="popup-gift">
        <div class="content__text">
          <p id="gift"></p>
        </div>
        <div class="popup-close">Đóng</div>
      </div>

      <div id="tham-lam" class="popup-gift">
        <div class="content__text">
          <p id="giftfail"></p>
        </div>
        <div id="close" class="popup-close">Đóng</div>
      </div>
      <audio id="beat" src="./img/nhac.mp3"></audio>
      <audio id="click" src="./img/click.mp3"></audio>
  </div>

  <script>
    var wrapper = document.querySelector('.wrapper');
    var beat = document.getElementById('beat');
    var click = document.getElementById('click');
    var content = document.querySelectorAll('.content');
    var primary = document.getElementById('primary');
    var btnBox = document.querySelector('.box');
    var tips = document.querySelector('.tips')
    var btnNext = document.querySelector('.btn')
    var spin = document.querySelector('.spin-wrap')
    var cat = document.querySelector('.img-cat')

    var itemsGift = document.querySelectorAll('.content__gift-item');
    var textGift = document.getElementById('gift');

    var thamlam = document.getElementById('tham-lam');
    var textGiftFail = document.getElementById('giftfail');

    var popupGift = document.querySelector('.popup-gift')
    var popupClose = document.querySelectorAll('.popup-close')

    var giftArr = ["Áo cặp với anh","Ảnh chụp chung với anh","1 thằng chồng kiêm osin của em"]
    var ThamLamArr = ["1 hộp thôi cái đồ tham lammm","1 món thôi chị haiii :>"]
    textGift.textContent = "Chúc mừng em đã nhận được "+giftArr[Math.floor(Math.random()*giftArr.length)].toString()+""
    var isGiftOpen = false;
    var checkActive = 0;
    var currentWidth = content[0].offsetWidth;

    popupClose[0].onclick = function() {
      popupGift.style.left = "-50%"
    }
    popupClose[1].onclick = function() {
      thamlam.style.left = "-50%"
    }
    itemsGift.forEach(function(item) {
        item.onclick = function() {
          // var x = document.querySelector('.content__gift-item.active')
          // x.classList.remove('active');
          item.classList.add('active')
          for(let i = 0; i<itemsGift.length;i++) {
            if(itemsGift[i].classList.contains('active')) {
              checkActive++;
              if(checkActive == 1){
                popupGift.style.left = "50%"
              }
              if(checkActive == 2) {
                isGiftOpen = true;
              }
            }
          }
          if(isGiftOpen) {
            thamlam.style.left = "50%"
            textGiftFail.textContent = ThamLamArr[Math.floor(Math.random()*ThamLamArr.length)].toString()
            // chặn lại dell cho mở nữa

          }
        }
        
    })

    // phần chuyển slide 
    var i = 0;
    btnNext.addEventListener('click', function() {
      click.play();
      i++;
      spin.style =  `left:-${currentWidth * i}px;`;
      if(i === content.length) {
        cat.style.display = 'flex';
        btnNext.style.display = 'none';
        i=-1;

        setTimeout(function(){
          cat.style.display = "none";
          btnNext.style.display = 'block';
          spin.style = `left:-${currentWidth * 2}px;`;
        },3000)
      }
    })
    
    btnBox.addEventListener('click',function() {
      beat.play();
      primary.style.top = '0';
      tips.classList.add('display-none');
    })
    beat.onpause = function() {
      beat.play();
    }
    
    function bubbles() {
      var count = 120;
      var i = 0;
      while(i < count) {
        var bubble = document.createElement('i');
        var x = Math.floor(Math.random() * wrapper.offsetWidth - 20);
        var y = Math.floor(Math.random() * wrapper.offsetHeight - 20);
        var size = Math.random() * 10;
        bubble.style.left = x+'px';
        bubble.style.top = y+'px';
        bubble.style.width = 10 + size + 'px';
        bubble.style.height = 10 + size + 'px';
        bubble.style.animationDuration = 5+size+'s';
        bubble.style.animationDelay = -size +'s';
        wrapper.appendChild(bubble);
        i++;
      }
    }
    bubbles();
  </script>
</body>
</html>